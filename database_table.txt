User_Account
id
store_id (Foregin Key)
role_permissions_id (Foregin Key)
username
email
mobile_number
first_name
middle_name
last_name
isOnline
isStatus
isArchive
date_created

Roles_Permissions
id
role_name
can_read
can_write
can_edit
can_delete
date_created
isArchive

User_Securty
id
user_id (Foregin Key)
password
password_salt
mfa_enabled
mfa_secret
failed_login_attempts
account_locked
lockout_time
last_login
last_logout
last_password_change

Customer
id (Primary Key)
store_id (Foregin Key)
address_id (Foregin Key)  
c_firstname
c_middlename
c_lastname
c_username
c_number
c_email
isAgreement
isOnline
isArchive
date_created

Customer_Securty
id (Primary Key)
customer_id (Foregin Key)
c_password
c_password_salt
mfa_enabled
mfa_secret
failed_login_attempts
account_locked
lockout_time
last_login
last_logout
last_password_change


--> Stores <--
id (Primary Key)
address_id (Foregin Key)
store_no
store_name
store_contact
store_email
is_main_store
updated_at
date_created
isStatus
isArchive

--> Addresses <--
id (Primary Key)
address_line1
address_line2
country
province
city
postal_code
latitude
longitude
updated_at

Laundry_Unit
id  (Primary Key)
store_id (Foregin Key)
unit_name
date_created
isUnitStatus (0 -> its Available, 1 -> its occupied  2 -> its Reserved 3 -> In Maintainance)
isArchive

--> Item Category <--
id (Primary Key)
category_name
isArchive
updated_at
date_created

--> Item <--
id (Primary Key)
category_id (Foregin Key)
item_code
item_name
isArchive
updated_at
date_created

--> Inventory <--
id (Primary Key)
item_id (Foregin Key)
store_id (Foregin Key)
price
quantity
isStatus

--> Laundry_Unit <--
id  (Primary Key)
store_id (Foregin Key)
unit_name
date_created
isUnitStatus (0 -> its Available, 1 -> its occupied  2 -> its Reserved 3 -> In Maintainance)
isArchive

--> Service_Request <--
id (Primary Key)
store_id (Foregin Key)
user_id (Foregin Key)
customer_id (Foregin Key)
service_type_id (Foregin Key)
tracking_code
customer_fullname
customer_type
notes
request_date
pickup_date
delivery_date
request_status
qr_code
qr_code_generated (BOOLEAN)
isPickup (BOOLEAN)
isDelivery  (BOOLEAN)


--> Service_Type <--
id (Primary Key)
store_id (Foregin Key)
service_name
default_price
date_created
isArchive

--> Service_Promotions <--
id (Primary Key)
service_id (Foregin Key)
discount_percentage
discount_price
valid_days
start_date
end_date
isActive
date_created
isArchive

--> Activity Log <--
id (Primary Key)
user_id (Foregin Key)
user_type 
action_type
action_description
timestamp

--> Laundry_Assignment <--
id (Primary Key)
service_request_id (Foregin Key)
unit_id (Foregin Key)
assigned_by (Foregin Key)
weight
assigned_at 
completed_at
isAssignmentStatus 0 = In Progress, 1 = Completed, 2 = Canceled
isCompleted

--> Transaction <--
id (Primary Key)
assigment_id (Foregin Key)
qr_code
total_amount,
transaction_date,
payment_method,
isStatus
isArhive



--> Message <--
id (Primary Key)
sender_customer_id (NULL) (Foregin Key)
sender_user_account_id (NULL)
recipient_customer_id (NULL)
recipient_user_account_id (NULL)
message

isRead
date_sent

--> User_Account <--
id
store_id (Foregin Key)
role_permissions_id (Foregin Key)
username
email
mobile_number
first_name
middle_name
last_name
isOnline
isStatus
isArchive
date_created

--> Customer <--
id (Primary Key)
store_id (Foregin Key)
address_id (Foregin Key)  
c_firstname
c_middlename
c_lastname
c_username
c_number
c_email
isAgreement
isOnline
isArchive
date_created

sender_type
receiver_type


// #MESSAGE
--> Conversations <--
id (Primary Key)
customer_id (Foregin Key, Nullable) From Customer  
user_id1 (Foregin Key)  From User_Account
user_id2 (Foregin Key , Nullable)  From User_Account
created_at
updated_at
last_message_at
is_archived

--> Messages <--
id (Primary Key)
conversation_id (Foregin Key) From Conversations  
sender_id (Foregin Key)   References either the User_Account or Customer table
sender_type
content
sent_at
is_read

--> Message_Status <--
id (Primary Key)
message_id (Foregin Key)   References from Messages table
status
updated_at



--> Notifications <--
https://isomorphic-furyroad.vercel.app/logistics

// Hard Part
Pending Pickup – The customer has placed a service request, but the clothes have not been picked up yet.
Ongoing Pickup – The delivery staff has picked up the clothes from the customer's location.
Complete Pickup – The delivery staff has picked up the clothes from the customer's location.


At Store – The clothes have been dropped off at the laundry store.
In Queue – The clothes are waiting for an available laundry unit.
In Laundry – The clothes have been assigned to a laundry unit and are currently being washed/dried.
Laundry Completed – The clothes have finished the washing/drying process.

Ready for Delivery – The clothes are ready to be delivered back to the customer.
Out for Delivery – The delivery staff is on the way to deliver the clothes to the customer.
Complete Delivery – The clothes have been delivered to the customer, and payment has been confirmed.
	
Canceled - its cancel the service request of the customer

 sr.store_id = ? AND sr.request_status = 'In Queue'


--> Service_Request <--
id (Primary Key)
store_id (Foregin Key)
user_id (Foregin Key)
customer_id (Foregin Key)
service_type_id (Foregin Key)
tracking_code
customer_fullname
customer_type
notes
request_date
pickup_date
delivery_date
request_status
qr_code
qr_code_generated (BOOLEAN)
isPickup (BOOLEAN)
isDelivery  (BOOLEAN)

--> Laundry_Assignment <--
id (Primary Key)
service_request_id (Foregin Key)
unit_id (Foregin Key)
assigned_by (Foregin Key)
weight
assigned_at 
completed_at
isAssignmentStatus 0 = In Progress, 1 = Completed, 2 = Canceled
isCompleted

--> Transaction <--
id (Primary Key)
assigment_id (Foregin Key)
qr_code
total_amount,
transaction_date,
payment_method,
isStatus
isArhive

























CREATE TABLE Messages (
    id INT AUTO_INCREMENT PRIMARY KEY,
    sender_customer_id INT NULL,  -- NULL if sender is from User_Account
    sender_user_account_id INT NULL,  -- NULL if sender is a Customer
    recipient_customer_id INT NULL,  -- NULL if recipient is from User_Account
    recipient_user_account_id INT NULL,  -- NULL if recipient is a Customer
    message TEXT NOT NULL,
    isRead BOOLEAN DEFAULT FALSE,
    date_sent TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (sender_customer_id) REFERENCES Customer(id),
    FOREIGN KEY (sender_user_account_id) REFERENCES User_Account(id),
    FOREIGN KEY (recipient_customer_id) REFERENCES Customer(id),
    FOREIGN KEY (recipient_user_account_id) REFERENCES User_Account(id)
);
